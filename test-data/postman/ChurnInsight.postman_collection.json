{
  "info": {
    "name": "ChurnInsight - Pruebas /predict",
    "_postman_id": "churninsight-collection-1",
    "description": "Peticiones para probar /api/v1/predict con cargas válidas e inválidas",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Válido - churn (1)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": { "mode": "raw", "raw": "{{raw_valid_churn_1}}" },
        "url": { "raw": "http://localhost:8080/api/v1/predict", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "v1", "predict"] }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Estado 200', function () { pm.response.to.have.status(200); });",
              "pm.test('Cuerpo contiene \"forecast\" y \"probability\"', function () { const json = pm.response.json(); pm.expect(json).to.have.property('forecast'); pm.expect(json).to.have.property('probability'); pm.expect(json.probability).to.be.within(0, 1); });"
            ]
          }
        }
      ]
    },
    {
      "name": "Válido - churn (2)",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{{raw_valid_churn_2}}" },
        "url": { "raw": "http://localhost:8080/api/v1/predict", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "v1", "predict"] }
      },
      "event": [ { "listen": "test", "script": { "exec": [ "pm.test('Estado 200', function () { pm.response.to.have.status(200); });", "pm.test('Cuerpo contiene \"forecast\" y \"probability\"', function () { const json = pm.response.json(); pm.expect(json).to.have.property('forecast'); pm.expect(json).to.have.property('probability'); pm.expect(json.probability).to.be.within(0, 1); });" ] } } ]
    },
    {
      "name": "Válido - no churn",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{{raw_valid_no_churn}}" },
        "url": { "raw": "http://localhost:8080/api/v1/predict", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "v1", "predict"] }
      },
      "event": [ { "listen": "test", "script": { "exec": [ "pm.test('Estado 200', function () { pm.response.to.have.status(200); });", "pm.test('Cuerpo contiene \"forecast\" y \"probability\"', function () { const json = pm.response.json(); pm.expect(json).to.have.property('forecast'); pm.expect(json).to.have.property('probability'); pm.expect(json.probability).to.be.within(0, 1); });" ] } } ]
    },
    {
      "name": "Inválido - tipos incorrectos",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{{raw_invalid_wrong_types}}" },
        "url": { "raw": "http://localhost:8080/api/v1/predict", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "v1", "predict"] }
      },
      "event": [ { "listen": "test", "script": { "exec": [ "pm.test('Esperar 400 o error de validación', function () { pm.expect(pm.response.code).to.be.oneOf([400,422,500]); });" ] } } ]
    },
    {
      "name": "Inválido - campos numéricos faltantes",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{{raw_invalid_missing_numeric}}" },
        "url": { "raw": "http://localhost:8080/api/v1/predict", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "v1", "predict"] }
      },
      "event": [ { "listen": "test", "script": { "exec": [ "pm.test('Esperar 400 o error de validación', function () { pm.expect(pm.response.code).to.be.oneOf([400,422,500]); });" ] } } ]
    },
    {
      "name": "Inválido - fuera de rango",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{{raw_invalid_out_of_range}}" },
        "url": { "raw": "http://localhost:8080/api/v1/predict", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "v1", "predict"] }
      },
      "event": [ { "listen": "test", "script": { "exec": [ "pm.test('Esperar 400 o error de validación', function () { pm.expect(pm.response.code).to.be.oneOf([400,422,500]); });" ] } } ]
    }
  ],
  "variable": [
    { "key": "raw_valid_churn_1", "value": "{\n  \"geography\": \"Spain\",\n  \"gender\": \"Female\",\n  \"age\": 58,\n  \"creditScore\": 420,\n  \"balance\": 12000.50,\n  \"estimatedSalary\": 18000.0,\n  \"tenure\": 1,\n  \"numOfProducts\": 1,\n  \"satisfactionScore\": 1,\n  \"isActiveMember\": false,\n  \"hasCrCard\": false,\n  \"complain\": true\n}" },
    { "key": "raw_valid_churn_2", "value": "{\n  \"geography\": \"Portugal\",\n  \"gender\": \"Male\",\n  \"age\": 66,\n  \"creditScore\": 300,\n  \"balance\": 8500.00,\n  \"estimatedSalary\": 6000.0,\n  \"tenure\": 2,\n  \"numOfProducts\": 1,\n  \"satisfactionScore\": 1,\n  \"isActiveMember\": false,\n  \"hasCrCard\": false,\n  \"complain\": false\n}" },
    { "key": "raw_valid_no_churn", "value": "{\n  \"geography\": \"Spain\",\n  \"gender\": \"Female\",\n  \"age\": 29,\n  \"creditScore\": 740,\n  \"balance\": 50.0,\n  \"estimatedSalary\": 45000.0,\n  \"tenure\": 8,\n  \"numOfProducts\": 3,\n  \"satisfactionScore\": 5,\n  \"isActiveMember\": true,\n  \"hasCrCard\": true,\n  \"complain\": false\n}" },
    { "key": "raw_invalid_wrong_types", "value": "{\n  \"geography\": 123,\n  \"gender\": true,\n  \"age\": \"twenty\",\n  \"creditScore\": \"six hundred\",\n  \"balance\": \"a lot\",\n  \"estimatedSalary\": \"forty\",\n  \"tenure\": \"two\",\n  \"numOfProducts\": \"three\",\n  \"satisfactionScore\": \"high\",\n  \"isActiveMember\": \"yes\",\n  \"hasCrCard\": \"no\",\n  \"complain\": \"false\"\n}" },
    { "key": "raw_invalid_missing_numeric", "value": "{\n  \"geography\": \"Spain\",\n  \"gender\": \"Male\",\n  \"age\": null,\n  \"creditScore\": null,\n  \"balance\": null,\n  \"estimatedSalary\": null,\n  \"tenure\": null,\n  \"numOfProducts\": null,\n  \"satisfactionScore\": null,\n  \"isActiveMember\": null,\n  \"hasCrCard\": null,\n  \"complain\": null\n}" },
    { "key": "raw_invalid_out_of_range", "value": "{\n  \"geography\": \"Spain\",\n  \"gender\": \"Female\",\n  \"age\": -5,\n  \"creditScore\": 9999,\n  \"balance\": -1000.0,\n  \"estimatedSalary\": -5000.0,\n  \"tenure\": -10,\n  \"numOfProducts\": -1,\n  \"satisfactionScore\": 99,\n  \"isActiveMember\": true,\n  \"hasCrCard\": true,\n  \"complain\": false\n}" }
  ]
}